<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IPCamWeb</title>
    <link rel="stylesheet" href="/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/jsmpeg@0.2.1/jsmpeg.min.js"></script>
  </head>
  <body>
    <header class="shell">
      <div>
        <h1>IPCamWeb</h1>
        <p>Лёгкое веб-приложение для просмотра и управления ONVIF-камерой.</p>
      </div>
      <div class="status">
        <span id="status-text">Отключено</span>
        <div id="status-dot" class="dot dot--red"></div>
      </div>
    </header>

    <main class="grid">
      <section class="card">
        <h2>Подключение</h2>
        <form id="connect-form" class="form">
          <label class="field">
            <span>IP адрес</span>
            <input id="ip" type="text" name="ip" placeholder="192.168.1.10" required />
          </label>
          <label class="field">
            <span>Логин</span>
            <input id="username" type="text" name="username" placeholder="admin" required />
          </label>
          <label class="field">
            <span>Пароль</span>
            <input id="password" type="password" name="password" placeholder="••••••" required />
          </label>
          <label class="field">
            <span>RTSP путь (опционально)</span>
            <input id="rtspPath" type="text" name="rtspPath" placeholder="/Streaming/Channels/101" />
          </label>
          <button type="submit" id="connect-btn">Подключиться</button>
          <p class="hint">Требуются установленный FFmpeg и доступ к камере из этой сети.</p>
        </form>
      </section>

      <section class="card video-card">
        <div class="video-header">
          <h2>Видео</h2>
          <button id="refresh-btn" class="ghost">Перезапустить поток</button>
        </div>
        <canvas id="video-canvas" width="960" height="540"></canvas>
      </section>

      <section class="card">
        <h2>PTZ управление</h2>
        <div class="ptz-grid">
          <button data-x="-1" data-y="1" class="control">↖</button>
          <button data-y="1" class="control">↑</button>
          <button data-x="1" data-y="1" class="control">↗</button>

          <button data-x="-1" class="control">←</button>
          <button id="ptz-stop" class="control">■</button>
          <button data-x="1" class="control">→</button>

          <button data-x="-1" data-y="-1" class="control">↙</button>
          <button data-y="-1" class="control">↓</button>
          <button data-x="1" data-y="-1" class="control">↘</button>
        </div>

        <div class="zoom-controls">
          <button data-z="1" class="control">Зум +</button>
          <button data-z="-1" class="control">Зум -</button>
        </div>

        <label class="field slider">
          <span>Скорость</span>
          <input type="range" id="speed" min="0.1" max="1" step="0.1" value="0.5" />
          <span id="speed-value">0.5</span>
        </label>
      </section>
    </main>

    <script src="/app.js"></script>
  </body>
</html>
